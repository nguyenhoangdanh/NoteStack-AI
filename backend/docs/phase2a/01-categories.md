# Categories API

Smart auto-categorization system with AI-powered suggestions and manual category management.

## üìã Overview

The categories system provides intelligent note organization through both manual categorization and AI-powered auto-categorization. It learns from user behavior and suggests relevant categories based on note content.

### Features
- ‚úÖ Manual category creation and management
- ‚úÖ AI-powered auto-categorization with confidence scoring
- ‚úÖ Category suggestions based on note content
- ‚úÖ Keyword-based category matching
- ‚úÖ Category analytics and note distribution
- ‚úÖ Hierarchical category support (future enhancement)

## üîê Endpoints

### GET /categories

Get all categories for the authenticated user.

**Headers:**
```
Authorization: Bearer <jwt_token>
```

**Query Parameters:**
- `includeAuto` (boolean, optional, default: true) - Include auto-generated categories

**Success Response (200):**
```json
[
  {
    "id": "cm4cat123",
    "name": "Technology",
    "description": "Tech-related notes and research",
    "color": "#3B82F6",
    "icon": "üíª",
    "keywords": ["tech", "programming", "software", "ai"],
    "isAuto": false,
    "confidence": null,
    "ownerId": "cm4user123",
    "createdAt": "2024-01-10T09:00:00.000Z",
    "updatedAt": "2024-01-10T09:00:00.000Z",
    "noteCategories": [
      {
        "note": {
          "id": "cm4note123",
          "title": "React Development Guide"
        }
      }
    ],
    "_count": {
      "noteCategories": 12
    }
  },
  {
    "id": "cm4cat456",
    "name": "Machine Learning",
    "description": "AI and ML related content",
    "color": "#10B981",
    "icon": "üß†",
    "keywords": ["ml", "ai", "neural", "data"],
    "isAuto": true,
    "confidence": 0.87,
    "ownerId": "cm4user123",
    "createdAt": "2024-01-12T14:30:00.000Z",
    "updatedAt": "2024-01-12T14:30:00.000Z",
    "noteCategories": [],
    "_count": {
      "noteCategories": 5
    }
  }
]
```

**Response Fields:**
- `isAuto`: Boolean indicating if category was auto-generated by AI
- `confidence`: AI confidence score (0-1) for auto-generated categories
- `keywords`: Array of keywords used for matching
- `_count.noteCategories`: Number of notes assigned to this category

**Frontend Integration:**
```typescript
// services/categoriesService.ts
export async function getCategories(includeAuto: boolean = true) {
  const token = localStorage.getItem('auth_token');
  const params = new URLSearchParams();
  
  if (!includeAuto) params.append('includeAuto', 'false');
  
  const url = params.toString() ? `/api/categories?${params}` : '/api/categories';
  
  const response = await fetch(url, {
    headers: { 'Authorization': `Bearer ${token}` }
  });

  if (!response.ok) {
    throw new Error('Failed to fetch categories');
  }

  return response.json();
}

// React component for categories list
export function CategoriesList() {
  const [categories, setCategories] = useState([]);
  const [showAutoCategories, setShowAutoCategories] = useState(true);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    setLoading(true);
    getCategories(showAutoCategories)
      .then(setCategories)
      .catch(console.error)
      .finally(() => setLoading(false));
  }, [showAutoCategories]);

  const manualCategories = categories.filter(cat => !cat.isAuto);
  const autoCategories = categories.filter(cat => cat.isAuto);

  return (
    <div className="categories-list">
      <div className="categories-header">
        <h2>Categories</h2>
        <div className="categories-controls">
          <label className="toggle">
            <input
              type="checkbox"
              checked={showAutoCategories}
              onChange={(e) => setShowAutoCategories(e.target.checked)}
            />
            Show AI Categories
          </label>
        </div>
      </div>

      {loading ? (
        <div>Loading categories...</div>
      ) : (
        <>
          {manualCategories.length > 0 && (
            <div className="manual-categories">
              <h3>Manual Categories</h3>
              <div className="category-grid">
                {manualCategories.map(category => (
                  <CategoryCard key={category.id} category={category} />
                ))}
              </div>
            </div>
          )}

          {showAutoCategories && autoCategories.length > 0 && (
            <div className="auto-categories">
              <h3>AI-Generated Categories</h3>
              <div className="category-grid">
                {autoCategories.map(category => (
                  <CategoryCard key={category.id} category={category} isAuto />
                ))}
              </div>
            </div>
          )}
        </>
      )}
    </div>
  );
}

function CategoryCard({ category, isAuto = false }) {
  return (
    <div className={`category-card ${isAuto ? 'auto-category' : ''}`}>
      <div className="category-header">
        <span className="category-icon">{category.icon}</span>
        <h4 className="category-name">{category.name}</h4>
        {isAuto && (
          <span className="confidence-score">
            {Math.round(category.confidence * 100)}%
          </span>
        )}
      </div>
      
      <p className="category-description">{category.description}</p>
      
      <div className="category-stats">
        <span className="note-count">
          {category._count.noteCategories} notes
        </span>
      </div>
      
      <div className="category-keywords">
        {category.keywords.slice(0, 3).map(keyword => (
          <span key={keyword} className="keyword">{keyword}</span>
        ))}
        {category.keywords.length > 3 && (
          <span className="more-keywords">+{category.keywords.length - 3}</span>
        )}
      </div>
    </div>
  );
}
```

---

### POST /categories

Create a new manual category.

**Headers:**
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

**Request Body:**
```json
{
  "name": "Personal Development",
  "description": "Self-improvement and learning notes",
  "color": "#F59E0B",
  "icon": "üìö",
  "keywords": ["learning", "growth", "skills", "development", "self-improvement"]
}
```

**Validation Rules:**
- `name`: Required string, 1-50 characters, unique per user
- `description`: Optional string, max 200 characters
- `color`: Optional string, valid hex color
- `icon`: Optional string, single emoji
- `keywords`: Array of strings, each 1-30 characters, max 20 keywords

**Success Response (201):**
```json
{
  "id": "cm4cat789",
  "name": "Personal Development",
  "description": "Self-improvement and learning notes",
  "color": "#F59E0B",
  "icon": "üìö",
  "keywords": ["learning", "growth", "skills", "development", "self-improvement"],
  "isAuto": false,
  "confidence": null,
  "ownerId": "cm4user123",
  "createdAt": "2024-01-15T12:00:00.000Z",
  "updatedAt": "2024-01-15T12:00:00.000Z"
}
```

**Error Responses:**
```json
// 400 - Validation Error
{
  "message": [
    "name should not be empty",
    "keywords must contain only valid strings"
  ],
  "error": "Bad Request",
  "statusCode": 400
}

// 409 - Category Name Already Exists
{
  "message": "Category with this name already exists",
  "error": "Conflict",
  "statusCode": 409
}
```

**Frontend Integration:**
```typescript
// services/categoriesService.ts
export async function createCategory(categoryData: {
  name: string;
  description?: string;
  color?: string;
  icon?: string;
  keywords: string[];
}) {
  const token = localStorage.getItem('auth_token');
  
  const response = await fetch('/api/categories', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(categoryData)
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Failed to create category');
  }

  return response.json();
}

// React form component
export function CreateCategoryForm({ onCategoryCreated }) {
  const [formData, setFormData] = useState({
    name: '',
    description: '',
    color: '#3B82F6',
    icon: 'üìÅ',
    keywords: []
  });
  const [keywordInput, setKeywordInput] = useState('');
  const [loading, setLoading] = useState(false);

  const addKeyword = (e) => {
    if (e.key === 'Enter' && keywordInput.trim()) {
      e.preventDefault();
      const keyword = keywordInput.trim().toLowerCase();
      
      if (!formData.keywords.includes(keyword)) {
        setFormData({
          ...formData,
          keywords: [...formData.keywords, keyword]
        });
      }
      setKeywordInput('');
    }
  };

  const removeKeyword = (keywordToRemove) => {
    setFormData({
      ...formData,
      keywords: formData.keywords.filter(k => k !== keywordToRemove)
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!formData.name.trim()) return;

    setLoading(true);
    try {
      const category = await createCategory(formData);
      onCategoryCreated(category);
      setFormData({
        name: '',
        description: '',
        color: '#3B82F6',
        icon: 'üìÅ',
        keywords: []
      });
      toast.success('Category created successfully!');
    } catch (error) {
      toast.error(error.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="create-category-form">
      <div className="form-row">
        <div className="form-group">
          <label htmlFor="name">Category Name</label>
          <input
            id="name"
            type="text"
            value={formData.name}
            onChange={(e) => setFormData({ ...formData, name: e.target.value })}
            placeholder="Enter category name"
            maxLength={50}
            required
          />
        </div>
        
        <div className="form-group icon-group">
          <label htmlFor="icon">Icon</label>
          <input
            id="icon"
            type="text"
            value={formData.icon}
            onChange={(e) => setFormData({ ...formData, icon: e.target.value })}
            placeholder="üìÅ"
            maxLength={2}
          />
        </div>
      </div>

      <div className="form-group">
        <label htmlFor="description">Description</label>
        <textarea
          id="description"
          value={formData.description}
          onChange={(e) => setFormData({ ...formData, description: e.target.value })}
          placeholder="Describe what this category is for..."
          maxLength={200}
          rows={3}
        />
      </div>

      <div className="form-group">
        <label htmlFor="color">Color</label>
        <input
          id="color"
          type="color"
          value={formData.color}
          onChange={(e) => setFormData({ ...formData, color: e.target.value })}
        />
      </div>

      <div className="form-group">
        <label htmlFor="keywords">Keywords</label>
        <input
          id="keywords"
          type="text"
          value={keywordInput}
          onChange={(e) => setKeywordInput(e.target.value)}
          onKeyDown={addKeyword}
          placeholder="Type keyword and press Enter"
        />
        <div className="keywords-list">
          {formData.keywords.map(keyword => (
            <span key={keyword} className="keyword-tag">
              {keyword}
              <button
                type="button"
                onClick={() => removeKeyword(keyword)}
                className="remove-keyword"
              >
                √ó
              </button>
            </span>
          ))}
        </div>
        <small>These keywords help AI auto-categorize notes</small>
      </div>

      <button type="submit" disabled={loading || !formData.name.trim()}>
        {loading ? 'Creating...' : 'Create Category'}
      </button>
    </form>
  );
}
```

---

### POST /categories/suggest

Get AI-powered category suggestions for note content.

**Headers:**
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

**Request Body:**
```json
{
  "content": "This note discusses React components, state management, and hooks. It covers useEffect, useState, and custom hooks for building modern web applications. The note also includes best practices for component lifecycle management and performance optimization techniques."
}
```

**Success Response (200):**
```json
[
  {
    "name": "Web Development",
    "confidence": 0.92,
    "matchingKeywords": ["react", "components", "hooks", "web"],
    "exists": true,
    "existingCategoryId": "cm4cat456",
    "suggestedIcon": "üåê",
    "suggestedColor": "#3B82F6"
  },
  {
    "name": "Frontend Frameworks",
    "confidence": 0.78,
    "matchingKeywords": ["react", "components", "frontend"],
    "exists": false,
    "suggestedIcon": "‚öõÔ∏è",
    "suggestedColor": "#61DAFB"
  },
  {
    "name": "JavaScript",
    "confidence": 0.85,
    "matchingKeywords": ["hooks", "useEffect", "useState"],
    "exists": true,
    "existingCategoryId": "cm4cat789",
    "suggestedIcon": "üìú",
    "suggestedColor": "#F7DF1E"
  }
]
```

**Response Fields:**
- `confidence`: AI confidence score (0-1) for the suggestion
- `exists`: Whether this category already exists for the user
- `existingCategoryId`: ID of existing category (if exists)
- `matchingKeywords`: Keywords from content that match this category
- `suggestedIcon` & `suggestedColor`: AI suggestions for new categories

**Frontend Integration:**
```typescript
// services/categoriesService.ts
export async function getCategorySuggestions(content: string) {
  const token = localStorage.getItem('auth_token');
  
  const response = await fetch('/api/categories/suggest', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ content })
  });

  if (!response.ok) {
    throw new Error('Failed to get category suggestions');
  }

  return response.json();
}

// React component for category suggestions
export function CategorySuggestions({ noteContent, onCategorySelected }) {
  const [suggestions, setSuggestions] = useState([]);
  const [loading, setLoading] = useState(false);

  const generateSuggestions = async () => {
    if (!noteContent.trim()) return;

    setLoading(true);
    try {
      const suggestionsData = await getCategorySuggestions(noteContent);
      setSuggestions(suggestionsData);
    } catch (error) {
      toast.error('Failed to generate category suggestions');
    } finally {
      setLoading(false);
    }
  };

  const handleSelectSuggestion = (suggestion) => {
    if (suggestion.exists) {
      // Use existing category
      onCategorySelected(suggestion.existingCategoryId);
    } else {
      // Create new category from suggestion
      onCategorySelected(null, suggestion);
    }
  };

  return (
    <div className="category-suggestions">
      <div className="suggestions-header">
        <h4>AI Category Suggestions</h4>
        <button 
          onClick={generateSuggestions}
          disabled={loading || !noteContent.trim()}
          className="generate-btn"
        >
          {loading ? 'Analyzing...' : 'Get Suggestions'}
        </button>
      </div>

      {suggestions.length > 0 && (
        <div className="suggestions-list">
          {suggestions
            .filter(s => s.confidence >= 0.6) // Only show high-confidence suggestions
            .map((suggestion, index) => (
            <div key={index} className="suggestion-item">
              <div className="suggestion-header">
                <span className="suggestion-icon">{suggestion.suggestedIcon}</span>
                <span className="suggestion-name">{suggestion.name}</span>
                <span className="confidence-score">
                  {Math.round(suggestion.confidence * 100)}%
                </span>
              </div>
              
              <div className="suggestion-details">
                <div className="matching-keywords">
                  {suggestion.matchingKeywords.map(keyword => (
                    <span key={keyword} className="keyword-match">
                      {keyword}
                    </span>
                  ))}
                </div>
                
                <div className="suggestion-actions">
                  {suggestion.exists ? (
                    <button
                      onClick={() => handleSelectSuggestion(suggestion)}
                      className="use-existing-btn"
                    >
                      Use Existing
                    </button>
                  ) : (
                    <button
                      onClick={() => handleSelectSuggestion(suggestion)}
                      className="create-new-btn"
                    >
                      Create New
                    </button>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      )}

      {suggestions.length === 0 && !loading && (
        <div className="no-suggestions">
          Add some content to your note to get AI category suggestions
        </div>
      )}
    </div>
  );
}
```

---

### POST /categories/auto-categorize/:noteId

Auto-categorize a specific note using AI.

**Headers:**
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

**Parameters:**
- `noteId` (string) - Note ID to categorize

**Request Body:**
```json
{
  "threshold": 0.7
}
```

**Request Fields:**
- `threshold`: Minimum confidence score for auto-assignment (0-1, default: 0.7)

**Success Response (200):**
```json
[
  {
    "name": "Technology",
    "confidence": 0.85,
    "matchingKeywords": ["programming", "software", "development"],
    "exists": true,
    "existingCategoryId": "cm4cat123",
    "assigned": true,
    "reason": "High confidence match with existing category"
  },
  {
    "name": "Web Development", 
    "confidence": 0.78,
    "matchingKeywords": ["react", "frontend", "components"],
    "exists": false,
    "assigned": false,
    "reason": "Confidence above threshold but category doesn't exist"
  },
  {
    "name": "JavaScript",
    "confidence": 0.65,
    "matchingKeywords": ["js", "hooks"],
    "exists": true,
    "existingCategoryId": "cm4cat456",
    "assigned": false,
    "reason": "Confidence below threshold (0.65 < 0.7)"
  }
]
```

**Response Fields:**
- `assigned`: Boolean indicating if category was automatically assigned
- `reason`: Explanation of why category was/wasn't assigned

**Frontend Integration:**
```typescript
// services/categoriesService.ts
export async function autoCategorizeNote(noteId: string, threshold: number = 0.7) {
  const token = localStorage.getItem('auth_token');
  
  const response = await fetch(`/api/categories/auto-categorize/${noteId}`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ threshold })
  });

  if (!response.ok) {
    throw new Error('Failed to auto-categorize note');
  }

  return response.json();
}

// React component for auto-categorization
export function AutoCategorizeButton({ noteId, onCategorized }) {
  const [loading, setLoading] = useState(false);
  const [results, setResults] = useState(null);
  const [threshold, setThreshold] = useState(0.7);

  const handleAutoCategorize = async () => {
    setLoading(true);
    try {
      const categorizationResults = await autoCategorizeNote(noteId, threshold);
      setResults(categorizationResults);
      
      const assignedCount = categorizationResults.filter(r => r.assigned).length;
      if (assignedCount > 0) {
        toast.success(`Automatically assigned ${assignedCount} categories`);
        onCategorized();
      } else {
        toast.info('No categories met the confidence threshold');
      }
    } catch (error) {
      toast.error('Auto-categorization failed: ' + error.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auto-categorize">
      <div className="auto-categorize-controls">
        <label>
          Confidence Threshold: {Math.round(threshold * 100)}%
          <input
            type="range"
            min="0.5"
            max="0.95"
            step="0.05"
            value={threshold}
            onChange={(e) => setThreshold(parseFloat(e.target.value))}
          />
        </label>
        
        <button
          onClick={handleAutoCategorize}
          disabled={loading}
          className="auto-categorize-btn"
        >
          {loading ? 'Analyzing...' : 'üß† Auto-Categorize'}
        </button>
      </div>

      {results && (
        <div className="categorization-results">
          <h4>Categorization Results</h4>
          {results.map((result, index) => (
            <div 
              key={index} 
              className={`result-item ${result.assigned ? 'assigned' : 'not-assigned'}`}
            >
              <div className="result-header">
                <span className="category-name">{result.name}</span>
                <span className="confidence">{Math.round(result.confidence * 100)}%</span>
                {result.assigned && <span className="assigned-badge">‚úì Assigned</span>}
              </div>
              <div className="result-reason">{result.reason}</div>
              <div className="matching-keywords">
                Keywords: {result.matchingKeywords.join(', ')}
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

---

### GET /categories/:id

Get category details with associated notes.

**Headers:**
```
Authorization: Bearer <jwt_token>
```

**Parameters:**
- `id` (string) - Category ID

**Success Response (200):**
```json
{
  "id": "cm4cat123",
  "name": "Technology",
  "description": "Tech-related notes and research",
  "color": "#3B82F6",
  "icon": "üíª",
  "keywords": ["tech", "programming", "software", "ai"],
  "isAuto": false,
  "confidence": null,
  "ownerId": "cm4user123",
  "createdAt": "2024-01-10T09:00:00.000Z",
  "updatedAt": "2024-01-10T09:00:00.000Z",
  "noteCategories": [
    {
      "noteId": "cm4note123",
      "confidence": 0.85,
      "isAuto": true,
      "createdAt": "2024-01-15T10:30:00.000Z",
      "note": {
        "id": "cm4note123",
        "title": "React Development Guide",
        "content": "Complete guide to React development...",
        "tags": ["react", "javascript"],
        "createdAt": "2024-01-15T09:00:00.000Z",
        "updatedAt": "2024-01-15T10:30:00.000Z"
      }
    }
  ]
}
```

---

### GET /categories/notes/:noteId

Get categories assigned to a specific note.

**Headers:**
```
Authorization: Bearer <jwt_token>
```

**Parameters:**
- `noteId` (string) - Note ID

**Success Response (200):**
```json
[
  {
    "noteId": "cm4note123",
    "categoryId": "cm4cat123",
    "confidence": 0.85,
    "isAuto": true,
    "createdAt": "2024-01-15T10:30:00.000Z",
    "category": {
      "id": "cm4cat123",
      "name": "Technology",
      "color": "#3B82F6",
      "icon": "üíª"
    }
  },
  {
    "noteId": "cm4note123",
    "categoryId": "cm4cat456",
    "confidence": null,
    "isAuto": false,
    "createdAt": "2024-01-15T11:00:00.000Z",
    "category": {
      "id": "cm4cat456",
      "name": "Learning",
      "color": "#10B981",
      "icon": "üìö"
    }
  }
]
```

**Frontend Integration:**
```typescript
// services/categoriesService.ts
export async function getNoteCategories(noteId: string) {
  const token = localStorage.getItem('auth_token');
  
  const response = await fetch(`/api/categories/notes/${noteId}`, {
    headers: { 'Authorization': `Bearer ${token}` }
  });

  if (!response.ok) {
    throw new Error('Failed to fetch note categories');
  }

  return response.json();
}

// React component for note categories display
export function NoteCategoriesDisplay({ noteId }) {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    getNoteCategories(noteId)
      .then(setCategories)
      .catch(console.error)
      .finally(() => setLoading(false));
  }, [noteId]);

  if (loading) return <div>Loading categories...</div>;

  return (
    <div className="note-categories">
      {categories.length === 0 ? (
        <span className="no-categories">No categories assigned</span>
      ) : (
        <div className="categories-list">
          {categories.map(({ category, isAuto, confidence }) => (
            <span 
              key={category.id} 
              className={`category-tag ${isAuto ? 'auto-category' : 'manual-category'}`}
              style={{ backgroundColor: category.color }}
            >
              {category.icon} {category.name}
              {isAuto && confidence && (
                <span className="confidence-indicator">
                  {Math.round(confidence * 100)}%
                </span>
              )}
            </span>
          ))}
        </div>
      )}
    </div>
  );
}
```

---

### POST /categories/notes/:noteId/assign/:categoryId

Manually assign a category to a note.

**Headers:**
```
Authorization: Bearer <jwt_token>
```

**Parameters:**
- `noteId` (string) - Note ID
- `categoryId` (string) - Category ID

**Success Response (201):**
```json
{
  "noteId": "cm4note123",
  "categoryId": "cm4cat123",
  "confidence": null,
  "isAuto": false,
  "createdAt": "2024-01-15T11:00:00.000Z",
  "category": {
    "id": "cm4cat123",
    "name": "Technology",
    "color": "#3B82F6",
    "icon": "üíª"
  }
}
```

**Error Responses:**
```json
// 409 - Category Already Assigned
{
  "message": "Category already assigned to this note",
  "error": "Conflict",
  "statusCode": 409
}

// 404 - Note or Category Not Found
{
  "message": "Note or category not found",
  "error": "Not Found",
  "statusCode": 404
}
```

---

### DELETE /categories/notes/:noteId/assign/:categoryId

Remove category assignment from a note.

**Headers:**
```
Authorization: Bearer <jwt_token>
```

**Parameters:**
- `noteId` (string) - Note ID
- `categoryId` (string) - Category ID

**Success Response (204):**
No content returned.

**Error Response (404):**
```json
{
  "message": "Category assignment not found",
  "error": "Not Found",
  "statusCode": 404
}
```

## üîß Smart Categorization Features

### Auto-Categorization Algorithm

The system uses a multi-factor approach for auto-categorization:

1. **Keyword Matching**: Direct keyword matches in note content
2. **Semantic Analysis**: AI analysis of note meaning and context
3. **User Behavior**: Learning from manual categorizations
4. **Confidence Scoring**: Multi-factor confidence calculation

```typescript
// Categorization scoring factors
const scoringFactors = {
  exactKeywordMatch: 0.4,    // Direct keyword found in content
  semanticSimilarity: 0.3,   // AI semantic analysis
  titleMatch: 0.2,           // Keywords in note title
  userHistory: 0.1           // Based on user's past categorizations
};
```

### Learning System

The AI learns from user behavior:
- **Manual Assignments**: When users manually assign categories
- **Rejections**: When users remove auto-assigned categories  
- **New Categories**: When users create categories for specific content
- **Keyword Updates**: Automatic keyword expansion based on usage

## üß™ Testing Examples

### Manual Testing with cURL

**Create category:**
```bash
curl -X POST http://localhost:3001/api/categories \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Machine Learning",
    "description": "AI and ML research notes",
    "color": "#10B981",
    "icon": "üß†",
    "keywords": ["ml", "ai", "neural", "data", "model"]
  }'
```

**Get category suggestions:**
```bash
curl -X POST http://localhost:3001/api/categories/suggest \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "This note covers deep learning concepts, neural networks, and TensorFlow implementation examples."
  }'
```

**Auto-categorize note:**
```bash
curl -X POST http://localhost:3001/api/categories/auto-categorize/NOTE_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"threshold": 0.75}'
```

### React Complete Category System
```tsx
// components/CategoryManager.tsx
export function CategoryManager() {
  const [categories, setCategories] = useState([]);
  const [selectedNote, setSelectedNote] = useState(null);
  const [showCreateForm, setShowCreateForm] = useState(false);

  const refreshCategories = async () => {
    try {
      const data = await getCategories();
      setCategories(data);
    } catch (error) {
      toast.error('Failed to load categories');
    }
  };

  useEffect(() => {
    refreshCategories();
  }, []);

  return (
    <div className="category-manager">
      <div className="category-header">
        <h2>Category Management</h2>
        <button 
          onClick={() => setShowCreateForm(true)}
          className="create-category-btn"
        >
          + New Category
        </button>
      </div>

      <CategoriesList 
        categories={categories}
        onCategoryUpdate={refreshCategories}
      />

      {showCreateForm && (
        <Modal onClose={() => setShowCreateForm(false)}>
          <CreateCategoryForm
            onCategoryCreated={(category) => {
              setCategories([...categories, category]);
              setShowCreateForm(false);
            }}
          />
        </Modal>
      )}

      {selectedNote && (
        <CategorySuggestions
          noteContent={selectedNote.content}
          onCategorySelected={(categoryId, suggestion) => {
            // Handle category assignment
          }}
        />
      )}
    </div>
  );
}
```

---

**Next:** [Duplicates Detection API](./02-duplicates.md)
